function onSubmit(e) { e.preventDefault(); const CAPTCHA_SITE_KEY = "", CAPTCHA_PROJECT_ID = "my-project-web1-1732838476499", CAPTCHA_API_KEY = ""; let responseMessage = document.getElementById("responseMessage"); responseMessage.className = "text-success", responseMessage.innerHTML = "", grecaptcha.enterprise.ready((async function () { let token = await grecaptcha.enterprise.execute(CAPTCHA_SITE_KEY, { action: "submit" }), url = `https://recaptchaenterprise.googleapis.com/v1/projects/${CAPTCHA_PROJECT_ID}/assessments?key=${CAPTCHA_API_KEY}`, postData = { event: { token: token, siteKey: CAPTCHA_SITE_KEY, expectedAction: "submit" } }, response = await fetch(url, { method: "POST", headers: { "Content-Type": "application/json", Accept: "application/json" }, body: JSON.stringify(postData) }), result; (await response.json()).tokenProperties.valid ? sendMail() : (responseMessage.innerHTML = "Error: Can not verify Recaptcha!", responseMessage.className = "text-danger") })) }